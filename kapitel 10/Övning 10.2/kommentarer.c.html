<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<html>
<head>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<title>Exported from Notepad++</title>
<style type="text/css">
span {
	font-family: 'Verdana';
	font-size: 8pt;
	color: #E0E2E4;
}
.sc0 {
}
.sc1 {
	color: #66747B;
}
.sc2 {
	color: #66747B;
}
.sc4 {
	color: #FFCD22;
}
.sc5 {
	font-weight: bold;
	color: #93C763;
}
.sc6 {
	color: #EC7600;
}
.sc9 {
	color: #A082BD;
}
.sc10 {
	color: #E8E2B7;
}
.sc11 {
}
.sc16 {
	color: #678CB1;
}
</style>
</head>
<body>
<div style="float: left; white-space: pre; line-height: 1; background: #000000; "><span class="sc9">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
</span><span class="sc0">
</span><span class="sc1">/* Skriv ett program som läser in en .c-fil. Programmet ska fråga efter filens namn.
Programmet ska undersöka vilka rader i filen som innehåller kommentarer.
anta att endast // används för kommentering. Programmet ska skriva ut hur
många procent av raderna som innehåller kommentarer 

Tips: Avänds strstr

strstr(x,y) där x och y är textsträngar, returnerar substrängen efter det att y hittats i x.
om strängen ej finns i x returneras NULL

ex: 
printf("%s\n", strstr("hejhajhoj", "haj")); //skriver ut "hajhoj"
printf("%s", strstr("hejhajhoj", "kalle")); //returnerar NULL - skriver ut (null)

*/</span><span class="sc0">

</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">main</span><span class="sc10">(){</span><span class="sc0">
    </span><span class="sc16">char</span><span class="sc0"> </span><span class="sc11">filnamn</span><span class="sc10">[</span><span class="sc4">30</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc1">/* = "cfilmedkommentarer.c", */</span><span class="sc11">s</span><span class="sc10">[</span><span class="sc4">300</span><span class="sc10">];</span><span class="sc0"> </span><span class="sc2">//ska innehålla 12 st "//" och har 80 rader
</span><span class="sc0">    </span><span class="sc2">//char filnamn[30] = "5rader2kommentarer.c", s[100]; //ska innehålla 2 st "//" och har 5 rader
</span><span class="sc0">    </span><span class="sc11">printf</span><span class="sc10">(</span><span class="sc6">"Ange filnamn: "</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">scanf</span><span class="sc10">(</span><span class="sc6">"%s"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">filnamn</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">FILE</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">cfil</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">fopen</span><span class="sc10">(</span><span class="sc11">filnamn</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"r"</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc2">//räknare för antal rader och kommentarer
</span><span class="sc0">    </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">rader</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">kommentarer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc1">/*
    whilesats som körs så länge fgets inte returnerar NULL (slut på tecken i textfilen), fgets läser in text till variabeln s.
    inläsning görs en rad i taget, eller tills 300 (i detta fall) tecken lästs in. Om en textrad i filen är längre än 300 tecken
    så kommer rader++ trigga även om raden inte är slut.
    */</span><span class="sc0">
    </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">fgets</span><span class="sc10">(</span><span class="sc11">s</span><span class="sc10">,</span><span class="sc4">300</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">cfil</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc5">NULL</span><span class="sc10">){</span><span class="sc0">
        </span><span class="sc11">rader</span><span class="sc10">++;</span><span class="sc0">
        </span><span class="sc2">//om strstr inte returnerar NULL, så har strängen "//" hittats i s, kommentar-räknaren ökar med 1
</span><span class="sc0">        </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">strstr</span><span class="sc10">(</span><span class="sc11">s</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"//"</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc5">NULL</span><span class="sc10">){</span><span class="sc0">
            </span><span class="sc11">kommentarer</span><span class="sc10">++;</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc2">//(double) framför variabeln kommentarer konverterar den till en double, för att undvika heltalsdivision vid beräkning av procent
</span><span class="sc0">    </span><span class="sc11">printf</span><span class="sc10">(</span><span class="sc6">"kommentarer: %d, rader: %d. Procent: %.1f %"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">kommentarer</span><span class="sc10">,</span><span class="sc11">rader</span><span class="sc10">,(</span><span class="sc16">double</span><span class="sc10">)</span><span class="sc11">kommentarer</span><span class="sc10">/</span><span class="sc11">rader</span><span class="sc10">*</span><span class="sc4">100</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span></div></body>
</html>
