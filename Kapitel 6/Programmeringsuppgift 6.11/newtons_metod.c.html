<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<html>
<head>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<title>Exported from Notepad++</title>
<style type="text/css">
span {
	font-family: 'Verdana';
	font-size: 8pt;
	color: #E0E2E4;
}
.sc0 {
}
.sc1 {
	color: #66747B;
}
.sc2 {
	color: #66747B;
}
.sc4 {
	color: #FFCD22;
}
.sc5 {
	font-weight: bold;
	color: #93C763;
}
.sc6 {
	color: #EC7600;
}
.sc9 {
	color: #A082BD;
}
.sc10 {
	color: #E8E2B7;
}
.sc11 {
}
.sc16 {
	color: #678CB1;
}
</style>
</head>
<body>
<div style="float: left; white-space: pre; line-height: 1; background: #000000; "><span class="sc9">#include &lt;stdio.h&gt;
#include &lt;math.h&gt; </span><span class="sc2">//för test med sqrt(x) - kvadratroten ur x, fabs(x) och pow(x,y)
</span><span class="sc0">
</span><span class="sc1">/*
Programmeringsuppgift 6.11, Sida 122

Konstruera en funktion som beräknar kvadratroten av ett tal x

Använd "Newtons metod":
gissa ett tal g &gt;= 0

det måste finnas ett annat tal h där

g * h = x

bryt ut h:

h = x/g

om g =~ h så har man funnit lösningen

om man "gissat dåligt" kan man göra en bättre gissning med

gny = (g+(x/g))/2  &lt;-- Detta är medevärdet av g &amp; h:   (g+h)/2  ---&gt; där h = x/g ---&gt; (g+(x/g))/2

sedan g = gny och beräkna ett nytt h (x/g)

skapa en funktion som beräknar kvadratroten ur x
forstätt tills skillnaden mellan två gissningar är mindre än 10^-6

*/</span><span class="sc0">

</span><span class="sc2">//Funktion för newtons metod, ger ungefärlig kvadratrot ur x
</span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">newton</span><span class="sc10">(</span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">){</span><span class="sc0">
    </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">g</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//först gissningen, halva x
</span><span class="sc0">    </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">gny</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">g</span><span class="sc10">+(</span><span class="sc11">x</span><span class="sc10">/</span><span class="sc11">g</span><span class="sc10">))/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//gissning ny: medelvärdet av h och g
</span><span class="sc0">    </span><span class="sc2">//körs medan absolutvärdet av skillnaden mellan g och gny är större än 10^-6:
</span><span class="sc0">    </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">fabs</span><span class="sc10">(</span><span class="sc11">gny</span><span class="sc10">-</span><span class="sc11">g</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">pow</span><span class="sc10">(</span><span class="sc4">10</span><span class="sc10">,-</span><span class="sc4">6</span><span class="sc10">)){</span><span class="sc0"> 
        </span><span class="sc11">g</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">gny</span><span class="sc10">;</span><span class="sc0">    </span><span class="sc2">//gissning sätts till den nya framtagna gissningen gny
</span><span class="sc0">        </span><span class="sc11">gny</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">g</span><span class="sc10">+(</span><span class="sc11">x</span><span class="sc10">/</span><span class="sc11">g</span><span class="sc10">))/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">  </span><span class="sc2">//ny bättre gissning tas fram från medelvärdet av h &amp; g
</span><span class="sc0">    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">gny</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">main</span><span class="sc10">(){</span><span class="sc0">
    </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc11">printf</span><span class="sc10">(</span><span class="sc6">"Ange x: "</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">scanf</span><span class="sc10">(</span><span class="sc6">"%lf"</span><span class="sc10">,&amp;</span><span class="sc11">x</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">printf</span><span class="sc10">(</span><span class="sc6">"Kvadratroten ur %.2lf är %.3lf"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">newton</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">));</span><span class="sc0">
    </span><span class="sc11">printf</span><span class="sc10">(</span><span class="sc6">"\n--------------------------------------------"</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">printf</span><span class="sc10">(</span><span class="sc6">"\nTest sqrt(x) - Kvadratroten ur %.2lf är %.3lf"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">sqrt</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">));</span><span class="sc0"> </span><span class="sc2">//skriver ut kvadratroten ur x, med sqrt(x) från math.h. För jämförelse
</span><span class="sc0">    </span><span class="sc11">printf</span><span class="sc10">(</span><span class="sc6">"\nTest pow(%.2lf),2) - %.2lf^2 är %.3lf"</span><span class="sc10">,</span><span class="sc11">newton</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">),</span><span class="sc11">newton</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">),</span><span class="sc11">pow</span><span class="sc10">(</span><span class="sc11">newton</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">),</span><span class="sc4">2</span><span class="sc10">));</span><span class="sc0"> </span><span class="sc2">//testar värdet från funktionen ^2 , ska ge x
</span><span class="sc0">    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span></div></body>
</html>
