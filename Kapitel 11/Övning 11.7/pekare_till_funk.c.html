<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<html>
<head>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<title>Exported from Notepad++</title>
<style type="text/css">
span {
	font-family: 'Verdana';
	font-size: 8pt;
	color: #E0E2E4;
}
.sc0 {
}
.sc1 {
	color: #66747B;
}
.sc2 {
	color: #66747B;
}
.sc4 {
	color: #FFCD22;
}
.sc5 {
	font-weight: bold;
	color: #93C763;
}
.sc6 {
	color: #EC7600;
}
.sc9 {
	color: #A082BD;
}
.sc10 {
	color: #E8E2B7;
}
.sc11 {
}
.sc16 {
	color: #678CB1;
}
</style>
</head>
<body>
<div style="float: left; white-space: pre; line-height: 1; background: #000000; "><span class="sc9">#include &lt;stdio.h&gt;
#include &lt;math.h&gt;
#define LITETTAL 0.0000000000001
</span><span class="sc0">
</span><span class="sc1">/* Övning 11.7, Sida 272

Skriv en version av c++-algoritmen 'equal', som kan användas
för att testa om alla elementen i två fält är lika.

Funktionen ska ha datatypen _Bool. Dess tre första parametrar
ska vara samma som funktionen transform på sida 272, fast
typen ska vara double. Den tredje parametern kan ha const.

Den fjärde parametern ska vara en pekare till en funktion som
får två double parametrar och ger ett sanningsvärde som resultat.

Använd denna funktion inne i funktionen equal för att jämföra motsvarande
element i de två fälten.
*/</span><span class="sc0">
</span><span class="sc11">_Bool</span><span class="sc0"> </span><span class="sc11">jamforElement</span><span class="sc10">(</span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">){</span><span class="sc0">
    </span><span class="sc2">//printf("Funktion: a:%.2f b:%.2f\n", a, b);
</span><span class="sc0">    </span><span class="sc2">//absolutvärdet av differensen mellan talen jämförs mot ett "litet tal", om det är större än det talet anses elementen vara olika
</span><span class="sc0">    </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">fabs</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">-</span><span class="sc11">b</span><span class="sc10">)&gt;</span><span class="sc11">LITETTAL</span><span class="sc10">){</span><span class="sc0">
        </span><span class="sc2">//printf("Funk: Ej lika!\n");
</span><span class="sc0">        </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc2">//printf("Funk: Lika!\n");
</span><span class="sc0">    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc11">_Bool</span><span class="sc0"> </span><span class="sc11">testFunktion</span><span class="sc10">(</span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">){</span><span class="sc0">
    </span><span class="sc11">printf</span><span class="sc10">(</span><span class="sc6">"Hej!"</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/*Författarens:
_Bool equal(const double *first,  const double *last, double *first2,            _Bool (*f)(double, double)) */</span><span class="sc0">

</span><span class="sc11">_Bool</span><span class="sc0"> </span><span class="sc11">equal</span><span class="sc10">(</span><span class="sc16">const</span><span class="sc0"> </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">start</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">const</span><span class="sc0"> </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">end</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">array2</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">_Bool</span><span class="sc10">(*</span><span class="sc11">op</span><span class="sc10">)(</span><span class="sc16">double</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">double</span><span class="sc10">)){</span><span class="sc0">
    </span><span class="sc2">//Element 4 '_Bool(*op)(double, double))' är en pekare till en _Bool funktion som får två double som parametrar
</span><span class="sc0">    </span><span class="sc2">//i forsatsens initieras en pekare till pekaren start, forloopen körs så länge pekare inte är större än pekaren end
</span><span class="sc0">    </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">const</span><span class="sc0"> </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">pekare</span><span class="sc10">=</span><span class="sc11">start</span><span class="sc10">;</span><span class="sc11">pekare</span><span class="sc10">&lt;</span><span class="sc11">end</span><span class="sc10">;</span><span class="sc11">pekare</span><span class="sc10">++){</span><span class="sc0">
        </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">op</span><span class="sc10">(*</span><span class="sc11">pekare</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">array2</span><span class="sc10">)){</span><span class="sc0"> </span><span class="sc2">//om funktionen som op pekar på returnerar 0 (!inverterat), returneras 0
</span><span class="sc0">            </span><span class="sc2">//printf("Funktion: OLIKA!\n");
</span><span class="sc0">            </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0">
        </span><span class="sc11">array2</span><span class="sc10">++;</span><span class="sc0"> </span><span class="sc2">//denna går att ha i forloopen, men jag föredrar att ha den utanför
</span><span class="sc0">    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc2">//printf("Funktion: LIKA!\n");
</span><span class="sc0">    </span><span class="sc2">//om op inte returnerar 0 för någon av jämförelserna så returneras 1 (elementen är lika i arrayerna)
</span><span class="sc0">    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
    
</span><span class="sc10">}</span><span class="sc0">
</span><span class="sc1">/* 
Författarens:
  for (const double *p=first; p&lt;last; p++, first2++) 
    if (!f(*p, *first2))
      return 0;
  return 1; */</span><span class="sc0">


</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">main</span><span class="sc10">(){</span><span class="sc0">
    </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">array1</span><span class="sc10">[</span><span class="sc4">5</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc4">1.4</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">2.2</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1.3</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">6.5</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1.000001</span><span class="sc10">};</span><span class="sc0">
    </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">array2</span><span class="sc10">[</span><span class="sc4">5</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc4">1.4</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">2.2</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1.3</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">6.5</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1.005001</span><span class="sc10">};</span><span class="sc0">
    </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">storlek</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">sizeof</span><span class="sc0"> </span><span class="sc11">array1</span><span class="sc10">/</span><span class="sc5">sizeof</span><span class="sc0"> </span><span class="sc11">array1</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">];</span><span class="sc0">
    </span><span class="sc2">//if(equal(array1, array1+storlek, array2, testFunktion)){
</span><span class="sc1">/*  om funktionen equal returnerar 1 är elementen lika, 
    equal använder i sin tur en annan funktion 'jamforElement' för att jämföra talen
    equal har som sin fjärde parameter en pekare till funktioner av samma type
    som jamforElement */</span><span class="sc0">
    </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">equal</span><span class="sc10">(</span><span class="sc11">array1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">array1</span><span class="sc10">+</span><span class="sc11">storlek</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">array2</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">jamforElement</span><span class="sc10">)){</span><span class="sc0">
        </span><span class="sc11">printf</span><span class="sc10">(</span><span class="sc6">"Elementen är lika!\n"</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc5">else</span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc11">printf</span><span class="sc10">(</span><span class="sc6">"Elementen är olika!\n"</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/*
Funktionen transform på sida 272:

void transform(const int *first, const int *last, int *result, int (*op)(int)){
    for(const int *p = first; p&lt;last;p++){
        *result++ = op(*p);
    }
}
*/</span></div></body>
</html>
